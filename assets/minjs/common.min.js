if("undefined"==typeof jQuery)throw new Error("丢失jQuery库文件");+function(t){t.extend({setCookie:function(t,e,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toUTCString();document.cookie=t+"="+e+";"+i+";path=/"},getCookie:function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}}),t.extend({getUrlPara:function(t,e){var n=e?e:window.location.search;if(n){var o=n.split("?")[1].split("&"),i=o.length,a=0;for(obj={};a<i;a++){var s=o[a].split("="),r=s[0],u=s[1]?s[1]:"";obj[r]=u}return t?obj[t]:obj}},getUrlPath:function(t){var e=window.location.pathname;if(e){for(var n=e.split("/"),o=n.length,i=0,a=[];i<o;i++)n[i]&&a.push(n[i]);return"undefined"==typeof t?a[a.length-1]:a[t]}return""}}),t.extend({init:function(){config={BLOG_SERVER:"http://192.168.1.105:8080/meditator"}},toTop:function(){t("body").append('<div class="toTop"><span class="iconfont icon-totop"></span></div>'),$topTop=t(".icon-totop"),t(window).on("scroll",function(){t(window).scrollTop()>=200?$topTop.fadeIn():$topTop.stop(!0).fadeOut()}),$topTop.on("click",function(){return t("html, body").animate({scrollTop:0},500),!1})},renderDocTitle:function(t){return t+" - 胡柯的个人笔记网站"},addDsqScript:function(e,n,o){t("body").append('<script id="dsq-count-scr" src="http://hukeblog-xxx.disqus.com/count.js" async></script>')},hkLoading:function(){t("body").append('<div id="loading" class="pa"><span class="pa loader"><div class="v-beat v-beat-odd"></div><div class="v-beat v-beat-even"></div><div class="v-beat v-beat-odd"></div></span></div>')},disHkLoading:function(){t("#loading").remove()},hkPopupTip:function(e,n,o){if(n=n?n:3e3,0==t("#hk-toast").length){var i='<div id="hk-toast">'+e+"</div>";t("body").append(i)}else t("#hk-toast").html(e);$toast=t("#hk-toast"),$toast.css({display:"none",border:"1px solid #5cb8e0","border-radius":"4px","background-color":"#5cb8e0",color:"white","font-size":"16px",padding:"10px","line-height":"1.3","max-width":"340px",position:"fixed",top:"100px","z-index":"10000"});var a=t(window).width(),s=$toast.width();$toast.css({left:(a-s)/2});var r='<div id="hkPopupMask" style="z-index:9999"></div>';t("body").append(r);var u=t("#hkPopupMask");u.css({position:"fixed",left:"0",top:"0","background-color":"#fff",opacity:"0.5",width:"100%",height:"100%"}),u.show(),$toast.slideDown();var d=setTimeout(function(){u.hide(),$toast.slideUp(),clearTimeout(d),"function"==typeof o&&o()},n)},hkAjax:function(e,n,o,i,a){a=a?a:"json";var s=t.extend({},o);t.ajax({type:e,url:config.BLOG_SERVER+n,dataType:a,data:s,headers:{Authorization:"Bearer "+t.getCookie("token")}}).done(function(t){i(t)}).fail(function(e){console.log("系统繁忙，请稍后重试",e),t.hkPopupTip(e.responseText,2e3)})},jsonP:function(e,n,o){n=t.extend({token:"some token"},n),t.when(t.ajax({url:e,type:"get",dataType:"jsonp",data:n})).done(function(t){o(t)}).fail(function(){console.log("系统繁忙，请稍后重试")})},getTimeUtils:function(){return{getCrtTimeStamp:function(){var t=(new Date).getTime();return t},getTimeStampByDate:function(t){if(isNaN(t)){var e=t.substr(0,4),n=t.substr(5,2),o=t.substr(8,2),i=t.substr(11,2),a=t.substr(14,2),s=t.substr(17,2),r=Date.parse(new Date(e,parseInt(n)-1,o,i,a,s));return r}var r=Date.parse(new Date(t));return r},getDateByTimeStampWithDash:function(t){var t=parseInt(t);t=isNaN(t)?0:t;var e=new Date(t),n=e.getFullYear(),o=this.twoDigits(e.getMonth()+1),i=this.twoDigits(e.getDate()),a=this.twoDigits(e.getHours()),s=this.twoDigits(e.getMinutes()),r=this.twoDigits(e.getSeconds());return n+"-"+o+"-"+i+" "+a+":"+s+":"+r},getDateByTimeStamp:function(t){var t=parseInt(t);t=isNaN(t)?0:t;var e=new Date(t),n=e.getFullYear(),o=this.twoDigits(e.getMonth()+1),i=this.twoDigits(e.getDate());return n+""+o+i},getTimespanInSeconds:function(t,e){var n=this.getTimeStampByDate(t),o=this.getTimeStampByDate(e);return(o-n)/1e3},getTimespanInMinutes:function(t,e){var n=this.getTimespanInSeconds(t,e),o=Math.floor(n/60);return o},getTimespanInHours:function(t,e){var n=this.getTimespanInSeconds(t,e),o=Math.floor(n/3600);return o},getTimespanInDays:function(t,e){var n=this.getTimespanInHours(t,e),o=Math.floor(n/24);return o},formatStartedTime:function(t){var e=parseInt(t.substr(5,2))+"月"+parseInt(t.substr(8,2))+"日 "+t.substr(11);return e},getTimeFieldsObj:function(t,e){var t=Math.abs(t),n=0,o=Math.floor(t/60/60),i=Math.floor(t/60%60),a=Math.floor(t%60),s={hours:o,minutes:i,seconds:a};return e&&(n=Math.floor(o/24),o-=24*n,s={days:n,hours:o,minutes:i,seconds:a}),s},twoDigits:function(t){return t>=10?t:"0"+t},getLabelByTimestamp:function(t){var e=Math.abs(TimeUtils.getCrtTimeStamp()-t),n=e/1e3;if(n>0&&n<60)return n%60+" seconds ago";if(n>=60&&n<3600)return Math.floor(n/60%60)+" mins ago";if(n>=3600&&n<86400)return Math.floor(n/60/60)+" hrs ago";if(n>=86400&&n<172800)return"yesterday";if(n>=172800&&n<604800)return Math.floor(n/60/60/24)+" days ago";if(n>=604800){var o=new Date(t).toDateString();return o.substring(0,o.length-5)}}}}}),t.fn.extend({lazyLoad:function(){function e(){t(n).each(function(){var e=t(this).height(),n=t(this).get(0).getBoundingClientRect().top;if(n<o-e/3&&t(this).hasClass("lazy")){var i=this,a=new Image;a.src=t(i).data("original"),t(i).attr("data-original",0),t(i).removeClass("lazy"),a.onload=function(){t(i).hide().attr("src",a.src).show()}}})}var n=this,o=parseFloat(t(window).height());e(),t(window).on("scroll",function(){e()})},donetyping:function(e,n){n=n||1e3;var o,i=function(t){o&&(o=null,e.call(t))};return this.each(function(e,a){var s=t(a);s.is(":input")&&s.on("keyup keypress paste",function(t){"keyup"==t.type&&8!=t.keyCode||(o&&clearTimeout(o),o=setTimeout(function(){i(a)},n))}).on("blur",function(){i(a)})})}}),t.init()}(jQuery);